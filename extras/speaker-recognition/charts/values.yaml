# Default values for speaker-recognition chart

speaker:
  image:
    repository: speaker-recognition
    tag: latest
    pullPolicy: Always
  service:
    type: ClusterIP
    port: 8085
  resources:
    requests:
      memory: "2Gi"
      cpu: "500m"
    limits:
      memory: "4Gi"
      cpu: "2000m"
  nvidia:
    enabled: true
  persistence:
    modelCache:
      enabled: false  # Using shared models cache instead
      size: 10Gi
    audioChunks:
      enabled: true
      size: 1Gi
    debug:
      enabled: false
      size: 1Gi
    speakerData:
      enabled: true
      size: 1Gi
  env:
    SIMILARITY_THRESHOLD: "0.15"
    SPEAKER_SERVICE_HOST: "0.0.0.0"
    SPEAKER_SERVICE_PORT: "8085"

# Node selector configuration
nodeSelector:
  enabled: true
  hostname: "babel"

webui:
  image:
    repository: speaker-recognition-ui
    tag: latest
    pullPolicy: Always
  service:
    type: ClusterIP
    port: 5173
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  env:
    # Environment variables are set by Skaffold setValueTemplates
    # REACT_UI_HOST: set by skaffold
    # REACT_UI_PORT: set by skaffold  
    # REACT_UI_HTTPS: set by skaffold
    # VITE_ALLOWED_HOSTS: set by skaffold
    # WEBUI_CORS_ORIGIN: set by skaffold

# Ingress configuration
ingress:
  # host: {{ .env.SPEAKER_SERVICE_HOST }}
  enabled: true

# Global shared configuration
global:
  sharedModels:
    enabled: true
    size: 20Gi
    # Use the working openebs-hostpath storage class
    storageClassName: "openebs-hostpath"
    
    # Disable HostPath since we're using external PVC
    useHostPath: false
    
    # Use external PVC created in k8s-manifests
    useExternalPVC: true
    
    # Pre-download models using init job
    initJob:
      enabled: false

# Secrets configuration
secrets:
  # Set these values when deploying:
  # --set secrets.hfToken="your_hf_token_here"
  # --set secrets.deepgramApiKey="your_deepgram_key_here"
  hfToken: ""
  deepgramApiKey: ""
  # Fixed secret name to prevent regeneration - uses existing secret from Makefile
  name: "friend-lite-secrets"
  # Don't create the secret, use existing one from Makefile
  create: false